[gd_scene load_steps=20 format=3 uid="uid://bgnguke0yisax"]

[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="1_7yhar"]
[ext_resource type="PackedScene" uid="uid://dc31drmlrfvh5" path="res://prefabs/player/player_base.tscn" id="2_mb4n0"]
[ext_resource type="Script" uid="uid://hw6p2ya2w4ns" path="res://Src/Player/CustomInputController.cs" id="3_7yhar"]
[ext_resource type="Script" uid="uid://ccmiitq0sdh7j" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_noise_emitter_3d.gd" id="4_8ylla"]
[ext_resource type="PackedScene" uid="uid://bn3d7gutc3bln" path="res://prefabs/ui/player/abilities_display.tscn" id="4_wk0fx"]
[ext_resource type="PackedScene" uid="uid://ufxsbqnfq3wa" path="res://prefabs/ui/player/player_info_display.tscn" id="5_mb4n0"]
[ext_resource type="PackedScene" uid="uid://bhwsltjqeqih2" path="res://prefabs/ui/player/player_health.tscn" id="6_7yhar"]
[ext_resource type="Script" uid="uid://bvvs0tdkg5ttr" path="res://Src/Camera/PhantomCameraController.cs" id="6_qlfll"]
[ext_resource type="Script" uid="uid://csjccrhj5wnx7" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="7_5dv0b"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="8_8ylla"]
[ext_resource type="Script" uid="uid://dppd2k61cjr2v" path="res://Src/Camera/CameraDeadZoneFollower.cs" id="8_juesv"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_j5px3"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_twpsu"]
sky_material = SubResource("ProceduralSkyMaterial_j5px3")

[sub_resource type="Environment" id="Environment_lrqlo"]
background_mode = 2
sky = SubResource("Sky_twpsu")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Resource" id="Resource_qlfll"]
script = ExtResource("8_8ylla")

[sub_resource type="BoxMesh" id="BoxMesh_sqa0i"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jh1ax"]
albedo_color = Color(0.286275, 0, 0.396078, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_j5px3"]
size = Vector3(100, 1, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_qlfll"]
size = Vector3(15, 10, 10)

[node name="Root" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lrqlo")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.996779, 0.0724465, -0.0344001, 0, 0.428935, 0.903335, 0.0801989, 0.900426, -0.427554, 0, 0, 0)
shadow_enabled = true

[node name="MainCameraPhantom" type="Camera3D" parent="."]
transform = Transform3D(-0.94787973, 0.26511267, -0.17674175, 0.18673575, 0.9116645, 0.36603513, 0.25817397, 0.31395316, -0.9136543, 0, 18.271431, -2.7826)
current = true
fov = 90.0

[node name="PhantomCameraHost" type="Node" parent="MainCameraPhantom"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("1_7yhar")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="MainCamera" type="Node3D" parent="."]
transform = Transform3D(-0.94787973, 0.26511267, -0.17674175, 0.18673575, 0.9116645, 0.36603513, 0.25817397, 0.31395316, -0.9136543, 0, 18.271431, -2.7826)
top_level = true
script = ExtResource("7_5dv0b")
follow_mode = 2
look_at_mode = 2
tween_resource = SubResource("Resource_qlfll")
follow_offset = Vector3(0, 15, 10)
follow_damping = true
follow_damping_value = Vector3(0.15, 0.15, 0.15)
dead_zone_width = 0.7
dead_zone_height = 0.5
show_viewfinder_in_play = true
look_at_damping = true
metadata/_custom_type_script = "uid://csjccrhj5wnx7"

[node name="CameraNoiseEmitter" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.8192269, 0.5734587, 0, -0.5734587, 0.8192269, 0, 10.844889, 8.036627)
script = ExtResource("4_8ylla")
metadata/_custom_type_script = "uid://ccmiitq0sdh7j"

[node name="Player" parent="." instance=ExtResource("2_mb4n0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.27143, -2.7826)

[node name="Ground" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0397463, 0)

[node name="GroundMesh" type="MeshInstance3D" parent="Ground"]
transform = Transform3D(100, 0, 0, 0, 1, 0, 0, 0, 100, 0, 0, 0)
mesh = SubResource("BoxMesh_sqa0i")
surface_material_override/0 = SubResource("StandardMaterial3D_jh1ax")

[node name="GroundCollider" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_j5px3")

[node name="GlobalControllers" type="Node3D" parent="."]

[node name="CustomCameraController" type="Node3D" parent="GlobalControllers" node_paths=PackedStringArray("_phantomCamera", "_phantomCameraShaker")]
script = ExtResource("6_qlfll")
_phantomCamera = NodePath("../../MainCamera")
_phantomCameraShaker = NodePath("../../CameraNoiseEmitter")

[node name="CustomInputController" type="Node3D" parent="GlobalControllers"]
script = ExtResource("3_7yhar")

[node name="CameraDeadzoneDetector" type="Area3D" parent="GlobalControllers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.18785, 0, -4.713022)
script = ExtResource("8_juesv")
_lerpRate = 7.0

[node name="CollisionShape" type="CollisionShape3D" parent="GlobalControllers/CameraDeadzoneDetector"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, -2.5)
shape = SubResource("BoxShape3D_qlfll")

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PlayerDisplay" type="Control" parent="HUD"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PlayerAbilitiesDisplay" parent="HUD/PlayerDisplay" instance=ExtResource("4_wk0fx")]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -161.0
offset_top = -89.0
offset_right = -161.0
offset_bottom = -89.0
grow_horizontal = 0
grow_vertical = 0

[node name="PlayerInfoDisplay" parent="HUD/PlayerDisplay" instance=ExtResource("5_mb4n0")]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = -1.0
offset_top = -63.0
offset_right = -1.0
offset_bottom = -63.0
grow_vertical = 0

[node name="PlayerHealth" parent="HUD/PlayerDisplay" instance=ExtResource("6_7yhar")]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 70.595
offset_top = -57.119995
offset_right = 70.595
offset_bottom = -57.119995
grow_vertical = 0
rotation = -0.0523599
